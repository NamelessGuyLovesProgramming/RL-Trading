# Claude Code Session Preferences

## üß† **CORE WORKFLOW - Verstehen vor Programmieren**

### **Schritt 1: Vollst√§ndiges Verst√§ndnis**
- **NIE sofort programmieren** - erst komplett verstehen
- **Aktiv nachfragen** bis 100% Klarheit erreicht
- **Kontext erfassen**: Was ist das Ziel? Warum? Wie passt es ins Gesamtbild?
- **Edge Cases identifizieren**: Was k√∂nnte schiefgehen?
- **Requirements kl√§ren**: Alle Unklarheiten beseitigen

### **Schritt 2: Anforderungsanalyse & Design**
- **√úber die Anforderungen nachdenken**: Projektstruktur ber√ºcksichtigen f√ºr √Ñnderungen
- **Designpattern evaluieren**: Passende Patterns identifizieren und nutzen
- **Architektur-Entscheidungen**: SOLID Principles und Best Practices anwenden

### **Schritt 3: Intelligenter Ablaufplan**
- **Detaillierten Plan erstellen** mit logischen Schritten
- **Task-Abh√§ngigkeiten analysieren**: Welche Tasks h√§ngen zusammen?
- **Optimierungen identifizieren**: K√∂nnen Tasks kombiniert werden?
- **Risiken bewerten**: Welche Schritte sind kritisch?
- **Plan pr√§sentieren** und auf "GO" warten

### **Schritt 4: Implementation & Testing**
- **TodoWrite verwenden** f√ºr Tracking und Fortschrittskontrolle
- **Schrittweise abarbeiten** nach best√§tigtem Plan
- **Tests erstellen** f√ºr neue Funktionalit√§t w√§hrend Entwicklung
- **Alle Tests ausf√ºhren** vor "FERTIG"-Meldung
- **Continuous Validation** - bei Unklarheiten stoppen und nachfragen

## üîß Standard Operating Procedures

### Task Management Best Practices
- **IMMER TodoWrite verwenden** f√ºr multi-step Tasks
- **Tasks logisch gruppieren** und Abh√§ngigkeiten beachten
- **Granulare Tasks** - lieber mehr kleinere als wenige gro√üe
- **Tasks sofort als "completed" markieren** nach Fertigstellung
- **Genau EIN Task als "in_progress"** zu jeder Zeit
- **Bei Blockern**: Task pausieren, Problem kl√§ren, dann fortfahren

### Code Standards & Best Practices
- **immer Kommentare** hinzuf√ºgen ohne zu fragen
- **Bestehende Dateien bearbeiten** statt neue erstellen
- **Conventions befolgen** - erst Codebase verstehen, dann anpassen
- **Defensive Programming**: Error Handling, Input Validation
- **DRY Principle**: Don't Repeat Yourself
- **Single Responsibility**: Eine Funktion = Ein Zweck
- **Open/Closed Principle**: Funktionen offen f√ºr Erweiterung, geschlossen f√ºr Modifikation
- **Readable Code**: Selbstdokumentierender Code √ºber Kommentare
- **Security First**: Nie Secrets/Keys committen
- **Performance Aware**: Efficient algorithms, avoid unnecessary loops

### Software-Architekturen & Design Patterns

#### Erzeugungsmuster (Creational)
- **Factory Pattern**: Objekterstellung abstrahieren
- **Abstract Factory**: Familien verwandter Objekte erstellen
- **Builder Pattern**: Komplexe Objekte schrittweise konstruieren
- **Singleton Pattern**: Genau eine Instanz garantieren

#### Strukturmuster (Structural)
- **Adapter Pattern**: Inkompatible Schnittstellen verbinden
- **Decorator Pattern**: Objekte dynamisch erweitern
- **Facade Pattern**: Vereinfachte Schnittstelle zu komplexen Systemen
- **Composite Pattern**: Baum-Strukturen f√ºr Teil-Ganzes-Hierarchien

#### Verhaltensmuster (Behavioral)
- **Observer Pattern**: Event-basierte Kommunikation
- **Strategy Pattern**: Austauschbare Algorithmen/Strategien
- **Command Pattern**: Operationen als Objekte kapseln
- **State Pattern**: Verhalten basierend auf internem Zustand √§ndern
- **Template Method**: Algorithmus-Skelett mit variablen Schritten

#### Architektur-Patterns
- **MVC/MVP/MVVM**: Model-View-Controller Patterns f√ºr UI-Trennung
- **Repository Pattern**: Datenabstraktion und -zugriff
- **Dependency Injection**: Lose Kopplung, bessere Testbarkeit
- **SOLID Principles**: Single Responsibility, Open/Closed, Liskov, Interface Segregation, Dependency Inversion
- **Component-Based Architecture**: Modulare, wiederverwendbare Komponenten
- **Layered Architecture**: Separation of Concerns in Schichten
- **Plugin Architecture**: Erweiterbare Systeme durch Plugins

### Response Style & Communication
- **Verst√§ndnis-first**: Fragen bis alles klar ist
- **Strukturierte Antworten**: Plan ‚Üí Best√§tigung ‚Üí Implementation
- **Kurz und pr√§zise** - max 4 Zeilen au√üer bei Details/Pl√§nen
- **Deutsche Sprache** bevorzugt f√ºr UI-Texte
- **Direkte Antworten** ohne unn√∂tige H√∂flichkeitsfloskeln
- **Technische Genauigkeit** √ºber Diplomatie
- **Proaktive Probleme identifizieren** statt blind umsetzen

### Background Tasks
- **Nur Port 8504** f√ºr main trading app aktiv halten
- Andere Ports/Tasks nach Bedarf entfernen
- **Bash parallel calls** f√ºr multiple unabh√§ngige Operationen

### Project Specifics - RL Trading

#### Standard Asset & Settings
- **NQ=F** als Default-Symbol (NASDAQ-100 Futures)
- **UTC+2 (Europe/Berlin)** Zeitzone
- **5 Tage** historische Daten (period="5d")
- **Lightweight Charts** ohne Gitter (grid: visible: false)

#### Debug Mode Features
- Debug Panel in Sidebar (togglebar)
- Start-Datum Picker (default: 30 Tage zur√ºck)
- Main Controls: Next Kerze, Play/Pause, Speed (0.5x-10x)
- Auto-Play mit geschwindigkeitsabh√§ngigen Delays
- 30 Tage Debug-Daten laden (period="30d")

#### Chart Configuration
```javascript
timeScale: {
    timeVisible: true,
    secondsVisible: false,
    borderColor: '#485c7b'
},
grid: {
    vertLines: { visible: false },
    horzLines: { visible: false }
}
```

## üìÅ Key Files - Neue Struktur
- **Main Streamlit App**: `src/app.py` (Port 8504)
- **Konfiguration**: `src/config/settings.py`
- **Assets**: `src/utils/constants.py`
- **Datenanbindung**: `src/data/yahoo_finance.py`
- **Chart-Komponente**: `src/components/chart.py`
- **Sidebar**: `src/components/sidebar.py`
- **Trading Panel**: `src/components/trading_panel.py`
- **Backup (alt)**: `backup_20250917/`
- **üìù √Ñnderungshistorie**: `CHANGELOG.md` - Vollst√§ndige Dokumentation aller Software-√Ñnderungen

## üöÄ Quick Commands

### Start Fresh Session - HAUPTFENSTER: Chart-Only mit Positionstool
```bash
# üéØ HAUPTFENSTER: Chart-Only mit Positionstool (Port 8002) - REPARIERT
py chart_server.py

# Zus√§tzlich: Vollst√§ndige App (optional)
set PYTHONPATH=%cd%\src && py -m streamlit run src/app.py --server.port 8504 --server.headless true
```

### Standard Project Start Command
```bash
# Starte Chart-Only Hauptfenster mit Positionstool - TIMESTAMP-FIX IMPLEMENTIERT
py chart_server.py && start http://localhost:8002
```

### Git Operations (wenn gew√ºnscht)
```bash
git add .
git commit -m "Feature: [Beschreibung]

ü§ñ Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>"
```

## üéØ Session Starter Template

**F√ºr neue Sessions kopiere und paste:**

```
CORE WORKFLOW f√ºr diese Session:
1. NIE sofort programmieren - erst VOLLST√ÑNDIG verstehen
2. Aktiv nachfragen bis 100% Klarheit
3. Anforderungsanalyse & Design (Projektstruktur, Designpattern)
4. Intelligenten Ablaufplan erstellen mit Task-Abh√§ngigkeiten
5. Plan zeigen und auf "GO" warten
6. Implementation & Testing mit TodoWrite
7. Tests erstellen f√ºr neue Funktionalit√§t
8. Alle Tests starten - nur bei Fehlerfreiheit "FERTIG" abgeben

Standards:
- Best Practices: DRY, Single Responsibility, Open/Closed Principle
- Defensive Programming: Error Handling, Input Validation
- Deutsche UI-Texte, Code-Kommentare immer hinzuf√ºgen
- NQ=F Standard-Asset, UTC+2 Zeitzone
- HAUPTFENSTER: Chart-Only Port 8001 (chart_server.py)
- Kurze pr√§zise Antworten (max 4 Zeilen au√üer Details/Pl√§ne)
- Testing-First: Tests f√ºr jede neue Funktionalit√§t
- CHANGELOG.md aktualisieren bei √Ñnderungen
```

## üîÑ Wiederkehrende Workflows

### Testing & Quality Assurance Workflow
1. **Test-First Development**: Tests als Spezifikation definieren
2. **Parallel Development**: Tests w√§hrend Implementierung erstellen
3. **Funktionelle Tests**: Jede neue Funktionalit√§t einzeln testen
4. **Integration Tests**: Komplette Test-Suite ausf√ºhren
5. **Qualit√§tskontrolle**: Nur bei Fehlerfreiheit "FERTIG" melden
6. **Dokumentation**: CHANGELOG.md mit allen √Ñnderungen aktualisieren

### Debug Mode Testing
1. Sidebar ‚Üí "üêõ Debug Modus"
2. Start-Datum w√§hlen
3. "‚ñ∂Ô∏è Debug Starten"
4. Chart Controls verwenden

### Chart Anpassungen
- Zeitzone: Europe/Berlin
- Grid: visible: false
- TimeScale: timeVisible: true, secondsVisible: false

### Performance
- Background Tasks regelm√§√üig aufr√§umen
- Parallel Bash calls f√ºr unabh√§ngige Ops
- Session State effizient nutzen

---
**Erstellt:** 2025-09-17
**F√ºr:** RL Trading Projekt
**Zweck:** Konsistente Claude Code Sessions